@use '../helpers' as *;

.button {
  height: var(--input-height);
  border-radius: 34px;
  transition-duration: var(--transition-change-theme);
  border: none;
  background: none;
  cursor: pointer;

  @include hover() {
    transition-duration: var(--transition-duration);
    background-color: var(--border-muted);
  }

  @include focus-visible-no-typing;

  &-theme {
    --sizeButton: 96px;

    position: relative;
    width: var(--sizeButton);
    background-color: var(--bg-light);
    border: var(--border);

    @include tablet {
      --sizeButton: 76px;
      --input-height: 36px;
      border-width: var(--border-width-xm);
    }

    @include hover {
      transform: translateY(-2px);
    }

    &:active {
      transform: translateY(0);
    }

    &-toggle {
      @include abs-y;
      @include flex-center;

      width: calc(var(--sizeButton) / 4);
      height: calc(var(--sizeButton) / 4);
      left: calc(var(--sizeButton) / 8);
      transition: transform var(--transition-change-theme);

      svg {
        width: calc(var(--sizeButton) / 4);
        height: calc(var(--sizeButton) / 4);
        border: var(--border-width-s) solid var(--border-color);
        border-radius: 50%;
        background-color: var(--bg-dark);
      }

      &.is-active {
        --translateX: calc(var(--sizeButton) / 2.2);
        transform: translateX(var(--translateX));
      }
    }
  }

  &-clicking {
    width: fluid(450, 250);
    height: fluid(450, 250);
    border: var(--border);
    border-width: var(--border-width-xm);
    background-color: var(--bg);
    background-image: url('/paw-clicker/images/cat.png');
    background-size: 100%;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
    overflow: hidden;

    transition: background-color var(--transition-duration),
    background-image var(--transition-duration),
    transform var(--transition-duration);

    @include hover {
      background-color: var(--bg-light);
      transform: translateY(-3px) scale(1.02);
      background-image: url('/paw-clicker/images/cat-blink.png');
    }

    &:active {
      transform: translateY(0) scale(0.98);
    }
  }

  &-reset {
    --sizeButton: 48px;

    @include square(var(--sizeButton));
    background-color: var(--bg-light);
    border: var(--border);
    color: var(--text-muted);
    flex-shrink: 0;

    @include tablet {
      --sizeButton: 36px;
      border-width: var(--border-width-xm);
    }

    svg {
      width: 100%;
      height: 100%;
      fill: currentColor;
      transition: transform var(--transition-duration);
    }

    @include hover(false) {
      color: var(--text);

      svg {
        animation: spin360deg 0.7s ease-in-out;
      }

      transform: translateY(-2px);

      &:active {
        transform: translateY(0);
      }
    }
  }

  &-popup-link {
    display: flex;
    align-items: center;
    justify-content: center;
    --input-height: 36px;
    padding: 8px 12px;
    border-radius: var(--border-radius-m);
    background-color: var(--bg-light);
    border: var(--border);
    color: var(--text-muted);
    border-width: var(--border-width-s);
    white-space: nowrap;

    @include hover {
      background-color: var(--border-color);
      color: var(--text);
      transform: translateY(-2px);
    }

    &:active {
      transform: translateY(0);
    }

    @include tablet {
      --input-height: 32px;
      padding: 6px 10px;
      font-size: 13px;
    }
  }

  &-tabs-close-button {
    --sizeButton: 36px;

    @include square(var(--sizeButton));
    position: relative;
    background-color: var(--bg-light);
    border: var(--border);
    color: var(--text-muted);
    flex-shrink: 0;

    @include hover {
      background-color: var(--border-muted);
      color: var(--text);
      transform: translateY(-2px);
    }

    &:active {
      transform: translateY(0);
    }

    @include tablet {
      border-width: var(--border-width-xm);
    }

    &::before,
    &::after {
      @include abs-center;
      content: '';
      background-color: currentColor;
      width: 2px;
      height: calc(var(--sizeButton) / 2);
      border-radius: 3px;
      transition: background-color var(--transition-duration);
    }

    &::before {
      transform: rotate(45deg);
    }

    &::after {
      transform: rotate(-45deg);
    }
  }
}

@keyframes spin360deg {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}